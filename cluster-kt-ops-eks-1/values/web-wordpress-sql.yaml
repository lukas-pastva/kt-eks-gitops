deployments:

  web-wordpress-sql:
    image: mariadb:11.3
    resources:
      limits:
        memory: 500Mi
      requests:
        cpu: 230m
        memory: 250Mi
    ports:
      - name: http
        port: 3306
    env:
    - name: MARIADB_DATABASE
      valueFrom:
        secretKeyRef:
          name: web-wordpress
          key: MARIADB_DATABASE
    - name: MARIADB_USER
      valueFrom:
        secretKeyRef:
          name: web-wordpress
          key: MARIADB_USER
    - name: MARIADB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: web-wordpress
          key: MARIADB_PASSWORD
    - name: MARIADB_ROOT_PASSWORD
      valueFrom:
        secretKeyRef:
          name: web-wordpress
          key: MARIADB_ROOT_PASSWORD
    volumeMountsFull:
    - name: mariadb-data
      mountPath: /var/lib/mysql
    volumesFull:
    - name: mariadb-data
      persistentVolumeClaim:
        claimName: web-wordpress-sql-pvc

extraObjects:
- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: web-wordpress-sql-pvc
    annotations:
      "helm.sh/resource-policy": keep
  spec:
    accessModes:
      - ReadWriteOnce
    storageClassName: local-path
    resources:
      requests:
        storage: 1Gi